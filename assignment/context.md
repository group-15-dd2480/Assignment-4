# Features put into context

There were no big architectural choices to be made, nor design patterns that we had to decide on ourselves. Our issue mainly revolved around implementing a "sister" feature to an already existing one, namely whenever we were dealing with status codes we had to add the functionality to also work with status text.

There are a few cases where a status code is hard-coded as a fallback, in these cases we had to choose an appropriate status text message. In these cases we use the de-facto accepted standard message for said status code, for example "OK" for 200, and "Not Found" for 404. In some cases, the web server does not return a status text message at all, such as in the case of tomcat 9, in these cases an empty value, or null, is acceptable. A note here through, the karate-demo sub-project, which is meant as a demo of using karate in a real project, uses tomcat 9 which is a shame since we cannot show any useful usage of our feature without downgrading the dependency. It is indeed very strange of the tomcat project to, by force, prevent people of using a feature of the HTTP/1.1 spec.

In addition to saving the returned status text message, we also need to introduce the accompanying expression in the DSL that karate uses, for example for status codes one can use the following expression to assert a certain response code `Then status 200`, we have to implement a similar expression for the text, which we have done like so `Then status text OK`. Since karate wants you to write tests in their DSL, without this addition the changes we made would have been useless. But again, this did not require us to make any big decisions as to the implementation of this feature, most of the implementations were very similar to other existing ones, and we simply substituted some variables for others.